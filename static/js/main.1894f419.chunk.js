(this.webpackJsonprotorify=this.webpackJsonprotorify||[]).push([[0],{23:function(t,e,r){},24:function(t,e,r){},44:function(t,e,r){"use strict";r.r(e);var n=r(3),a=r.n(n),i=r(18),o=r.n(i),s=(r(23),r.p,r(24),r(1)),c=r(6),l=r.n(c),u=r(8),d=r(2),m=r(4),b=r(13),f=r(14),h=function(t,e,r){return Math.max(e,Math.min(r,t))},p=function(t,e,r){return h((r-t)/(e-t),0,1)},g=function(t){var e=a.a.useRef(),r=a.a.useRef(),n=function n(a){if(void 0!=r.current){var i=a-r.current;t(i)}r.current=a,e.current=requestAnimationFrame(n)};a.a.useEffect((function(){return e.current=requestAnimationFrame(n),function(){return cancelAnimationFrame(e.current)}}),[])};var v=r(0),j=window.Ammo,y=r(43),x=(r(27),r(41)),w=(r(42),null),O=.001,M="Free",C="Free (angular position, altitude)",S="Training altitude PID",D="Training angular position PID",I=function(){return{battery:100,batteryChart:[],yChart:[],vyChart:[],throttle:0,ms:0,stage:M,pids:{alt:{p:1,i:0,d:0,accI:[]}},simTime:0,deltaToSim:0,training:{maxspeed:!0,alt:{currentErrAcc:0,errs:[],p:.1,i:.001,d:.01,currentDir:"p",target:function(t){return 2+1.5*p(-.1,.1,Math.sin(2*Math.PI*2*Math.pow(t/15e3,2)))}}},camera:{position:[-4,1.7,0],lookAt:[0,1.7,0],followPos:!1,followLook:!0}}};function P(t){var e,r,n;r=new y.Scene,(n=new y.WebGLRenderer({canvas:t,antialias:!0})).setSize(window.innerWidth-300,window.innerHeight),(r=new y.Scene).background=new y.Color(12571109),(e=new y.PerspectiveCamera(70,(window.innerWidth-300)/window.innerHeight,.2,5e3)).position.set(-4,1.7,0),e.lookAt(new y.Vector3(0,1.7,0));var a=new y.HemisphereLight(16777215,16777215,.1);a.color.setHSL(.6,.6,.6),a.groundColor.setHSL(.1,1,.4),a.position.set(0,50,0),r.add(a);var i=new y.DirectionalLight(16777215,1);i.color.setHSL(.1,1,.95),i.position.set(-1,1.75,1),i.position.multiplyScalar(100),r.add(i),i.castShadow=!0,i.shadow.mapSize.width=2048,i.shadow.mapSize.height=2048;i.shadow.camera.left=-10,i.shadow.camera.right=10,i.shadow.camera.top=10,i.shadow.camera.bottom=-10,i.shadow.camera.far=13500,n.setClearColor(12571109),n.setPixelRatio(window.devicePixelRatio),n.setSize(window.innerWidth-300,window.innerHeight),n.gammaInput=!0,n.gammaOutput=!0,n.shadowMap.enabled=!0;var o=function(t){var e=t.scene,r={x:0,y:3,z:0},n={x:.1,y:.1,z:.1},a=new y.Mesh(new y.BoxBufferGeometry,new y.MeshPhongMaterial({color:16711935}));return a.position.set(r.x,r.y,r.z),a.scale.set(n.x,n.y,n.z),a.castShadow=!0,a.receiveShadow=!0,e.add(a),function(t,e,r){return a.position.set(t,e,r)}}({scene:r});return{camera:e,scene:r,renderer:n,target:o}}function B(t){var e=t.physicsWorld,r=t.scene,n=0,a=-1,i=0,o=20,s=2,c=20,l=0,u=0,d=0,m=1,b=new y.Mesh(new y.BoxBufferGeometry,new y.MeshPhongMaterial({color:10530724}));b.position.set(n,a,i),b.scale.set(o,s,c),b.castShadow=!0,b.receiveShadow=!0,r.add(b);var f=new j.btTransform;f.setIdentity(),f.setOrigin(new j.btVector3(n,a,i)),f.setRotation(new j.btQuaternion(l,u,d,m));var h=new j.btDefaultMotionState(f),p=new j.btBoxShape(new j.btVector3(.5*o,.5*s,.5*c));p.setMargin(.05);var g=new j.btVector3(0,0,0);p.calculateLocalInertia(0,g);var v=new j.btRigidBodyConstructionInfo(0,h,p,g),x=new j.btRigidBody(v);e.addRigidBody(x)}function V(t){for(var e=t.physicsWorld,r=t.scene,n=t.rigidBodies,a=0;a<n.length;a++){var i=n[a],o=i.userData.physicsBody;e.removeRigidBody(o);try{j.destroy(o.getCollisionShape()),j.destroy(o.getMotionState()),j.destroy(o)}catch(s){console.error(s)}r.remove(i)}n.length=0}function R(t){var e=t.physicsWorld,r=t.scene,n=t.rigidBodies,a=t.droneData,i=0,o=3,s=0,c=0,l=0,u=0,d=1,m=a.totalMass/1e3,b=[],f=new y.Group,h=.02,p=a.motorCenterDistance/1e3;if("quadrotor x"===a.type){[1*Math.PI/4,3*Math.PI/4,5*Math.PI/4,7*Math.PI/4].forEach((function(t){!function(t,e,r){var n=new y.Mesh(new y.SphereBufferGeometry(h),new y.MeshPhongMaterial({color:16712965}));n.position.set(t,e,r),n.castShadow=!0,f.add(n),b.push((function(t){n.material.setValues({color:new y.Color("hsl("+360*t+", 100%, "+Math.floor(20+80*t)+"%)")})}))}(p*Math.sin(t),0,p*Math.cos(t))}));var g=function(t,e,r){var n=new y.Mesh(new y.BoxBufferGeometry(t,e,r),new y.MeshPhongMaterial({color:0}));return n.position.set(0,0,0),n.castShadow=!0,f.add(n),n};g(2*p,.01,.01).rotation.set(0,Math.PI/4,0),g(2*p,.01,.01).rotation.set(0,-Math.PI/4,0);var v=new y.Mesh(new y.BoxBufferGeometry(p,.01,.01),new y.MeshPhongMaterial({color:16711680}));v.position.set(p/2,h,0),v.castShadow=!0,f.add(v);var x=new y.Mesh(new y.BoxBufferGeometry(p,.01,.01),new y.MeshPhongMaterial({color:65280}));x.position.set(0,h,p/2),x.rotation.set(0,Math.PI/2,0),x.castShadow=!0,f.add(x);var w=new y.Mesh(new y.BoxBufferGeometry(p,.01,.01),new y.MeshPhongMaterial({color:255}));w.position.set(0,p/2,0),w.rotation.set(0,0,Math.PI/2),w.castShadow=!0,f.add(w)}f.position.set(i,o,s),f.castShadow=!0,f.receiveShadow=!0,r.add(f);var O=new j.btTransform;O.setIdentity();var M=new j.btVector3(i,o,s);O.setOrigin(M),j.destroy(M);var C=new j.btQuaternion(c,l,u,d);O.setRotation(C),j.destroy(C);var S=new j.btDefaultMotionState(O);j.destroy(O);var D=new j.btBoxShape(new j.btVector3(a.motorCenterDistance/1e3,.02,a.motorCenterDistance/1e3));D.setMargin(.05);var I=new j.btVector3(0,0,0);D.calculateLocalInertia(m,I);var P=new j.btRigidBodyConstructionInfo(m,S,D,I),B=new j.btRigidBody(P);B.setActivationState(4),f.userData.physicsBody=B,f.userData.motorUpdateGraphicSpeedArray=b,e.addRigidBody(B),n.push(f)}function k(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(V(t),R(t),e){var r=t.sim,n=r.pids,a=r.training,i=r.stage;t.sim=I(),t.sim.pids=n,t.sim.training=a,t.sim.stage=i}else t.sim=I()}function A(){var t=new j.btDefaultCollisionConfiguration,e=new j.btCollisionDispatcher(t),r=new j.btDbvtBroadphase,n=new j.btSequentialImpulseConstraintSolver,a=new j.btDiscreteDynamicsWorld(e,r,n,t);return a.setGravity(new j.btVector3(0,-9.8,0)),w=new j.btTransform,a}function L(t){var e=t.getBasis(),r=[e.getRow(0).x(),e.getRow(0).y(),e.getRow(0).z(),e.getRow(1).x(),e.getRow(1).y(),e.getRow(1).z(),e.getRow(2).x(),e.getRow(2).y(),e.getRow(2).z()],n=[r[0],r[3],r[6],r[1],r[4],r[7],r[2],r[5],r[8]];return function(t,e,r){return[n[0]*t+n[3]*e+n[6]*r,n[1]*t+n[4]*e+n[7]*r,n[2]*t+n[5]*e+n[8]*r]}}function T(){var t,e=Object(n.useRef)(null),r=Object(n.useRef)(),a=Object(n.useState)({type:"quadrotor x",motorCenterDistance:1e3,motorKV:1e4,motorMass:20,motorLiftPerWatt:.02,escMass:20,batteryMass:100,batteryS:2,batteryP:1,batteryC:45,batteryCapacity:850,frameMass:100,totalMass:0,v:0,mA:0,w:0,j:0}),i=Object(m.a)(a,2),o=i[0],c=i[1],p=Object(n.useState)(I()),y=Object(m.a)(p,2),V=y[0],R=y[1],T=Object(n.useState)(!1),F=Object(m.a)(T,2),G=F[0],q=F[1];function H(t){c(t),q(!1)}return Object(n.useEffect)((function(){setTimeout((function(){window.addEventListener("keydown",(function(t){e.current&&(e.current.keys[t.key]=!0)})),window.addEventListener("keyup",(function(t){e.current&&(e.current.keys[t.key]=!1)}))}),50)}),[]),Object(n.useEffect)((function(){setInterval((function(){console.log(e.current)}),5e3)}),[]),Object(n.useEffect)((function(){if(G){var t;(null===(t=e.current)||void 0===t?void 0:t.alive)&&(e.current.droneData=o,k(e.current,!1))}else{var r,n=Object(d.a)(Object(d.a)(Object(d.a)({},x(o)),function(t){var e=3.7*t.batteryS,r=t.batteryC*t.batteryCapacity;return{v:e,mA:r,w:e*r/1e3,j:3600*t.batteryCapacity/1e3*e}}(o)),{totalMass:4*(a=o).escMass+4*a.motorMass+a.batteryMass+a.frameMass});(null===(r=e.current)||void 0===r?void 0:r.alive)&&(e.current.droneData=n),c(n),q(!0)}var a}),[o,G]),Object(n.useEffect)((function(){var t;function n(){return a.apply(this,arguments)}function a(){return(a=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Trying to load Ammo.js"),t.prev=1,t.next=4,j();case 4:j=t.sent,e.current=P(r.current),e.current.physicsWorld=A(),e.current.rigidBodies=[],B(e.current),e.current.alive=!0,q(!1),e.current.sim=I(),e.current.keys={},t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),console.error("ammo: ",t.t0),setTimeout((function(){return n()}),500);case 19:case"end":return t.stop()}}),t,null,[[1,15]])})))).apply(this,arguments)}void 0==(null===(t=j)||void 0===t?void 0:t.btDefaultCollisionConfiguration)&&n()}),[]),g((function(t){if(null!=e.current){for(var r=e.current,n=r.camera,a=r.scene,i=r.renderer,o=r.keys,s=r.sim,c=(r.droneData,r.rigidBodies),l=(r.physicsWorld,navigator.getGamepads()),u=0;u<l.length;u++){var d=l[u];d&&d.id.includes("Sony")&&(o.axes=[d.axes[0],d.axes[1],2*d.buttons[6].value-1,2*d.buttons[7].value-1])}c.length>0&&function(t,e){var r=performance.now();if(t.sim.deltaToSim=e,t.sim.simTime=0,t.droneData){var n=function(t){var e=t.sim,r=t.rigidBodies,n=t.physicsWorld,a=t.droneData;n.stepSimulation(.001,0);var i=r[0],o=i.userData.physicsBody,s=i.userData.motorUpdateGraphicSpeedArray;o.getMotionState().getWorldTransform(w);var c=[w.getOrigin().x(),w.getOrigin().y(),w.getOrigin().z()][1],l=L(w),u=[o.getLinearVelocity().x(),o.getLinearVelocity().y(),o.getLinearVelocity().z()][1];if(e.stage===S){o.getMotionState().getWorldTransform(w);var d={x:0,y:0,z:0,w:1},m=new j.btQuaternion(d.x,d.y,d.z,d.w);w.setRotation(m),j.destroy(m),o.getMotionState().setWorldTransform(w);var p=t.sim.training.alt.target(e.ms);t.target(0,p,0);var g=p-c;e.ms>=0&&(t.sim.training.alt.currentErrAcc+=Math.pow(Math.abs(g/100),1)),e.pids.alt.accI=e.pids.alt.accI+g/100,e.pids.alt.accI*=.995,e.pids.alt.pContrib=e.pids.alt.p*g,e.pids.alt.dContrib=-e.pids.alt.p*e.pids.alt.d*u,e.pids.alt.iContrib=e.pids.alt.p*e.pids.alt.i*e.pids.alt.accI,e.throttle=h(e.pids.alt.pContrib+e.pids.alt.dContrib+e.pids.alt.iContrib,0,1),function(){var t=e.throttle*(.001*a.batteryC*100)/3600,r=e.battery;e.battery=Math.max(0,e.battery-t);var n=(t=r-e.battery)/100*a.j/.001,i=a.motorLiftPerWatt*n,s=new j.btVector3(0,i/1e3,0),c=new j.btVector3(0,0,0);o.applyImpulse(s,c),j.destroy(s),j.destroy(c)}()}if(e.stage===M&&function(){var r=[0,0,0,0],n={};["z","s","q","d","e","a"].forEach((function(e){return n[e]=!0===t.keys[e]?1:0}));var i=n.z,c=n.s,u=n.q,d=n.d,m=n.a,p=n.e,g=t.keys.axes||[0,0,0,0];i+=.5*-g[1]+.5,c+=.5*g[1]+.5,u+=.5*-g[0]+.5,d+=.5*g[0]+.5,m+=.5*-g[2]+.5,p+=.5*g[2]+.5;var v=.5*-g[3]+.5;r[0]+=-i+c+u-d+p-m,r[1]+=-i+c-u+d-p+m,r[2]+=i-c-u+d+p-m,r[3]+=i-c+u-d-p+m;var y=r.reduce((function(t,e){return Math.min(t,e)})),x=r.reduce((function(t,e){return Math.max(t,e)})),w=Math.max(Math.abs(y),x);w<1&&(w=1),r=r.map((function(t){return t/w})),e.ms%500===0&&console.log("Contrib",r),r.forEach((function(t,r){var n=h(e.throttle+v+t,0,1),i=n*(.001*a.batteryC*100)*.25/3600;s[r](n);var c=e.battery;e.battery=Math.max(0,e.battery-i);var u,d,m=(i=c-e.battery)/100*a.j/.001,p=a.motorLiftPerWatt*m,g=(1+2*r)*Math.PI/4,y=a.motorCenterDistance/1e3;u=y*Math.sin(g),d=y*Math.cos(g);var x=.1*p/1e3,w=-Math.cos(g)*x*(r%2==0?1:-1),O=Math.sin(g)*x*(r%2==0?1:-1),M=Object(b.a)(j.btVector3,Object(f.a)(l(w,p/1e3,O))),C=Object(b.a)(j.btVector3,Object(f.a)(l(u,0,d)));o.applyImpulse(M,C),j.destroy(C),j.destroy(M)}))}(),e.ms%30===0&&(e.batteryChart.push(e.battery),e.yChart.push(c),e.vyChart.push(u)),e.ms+=1,[D,S].includes(e.stage)&&e.ms>=2e4){var v=t.sim;if(k(t),t.sim.training=v.training,t.sim.pids=v.pids,console.log(t.sim.training.alt.errs.length+" : "+t.sim.training.alt.currentErrAcc+" / ",t.sim.pids.alt.p+"/"+t.sim.pids.alt.i+"/"+t.sim.pids.alt.d),t.sim.training.alt.errs.length>0&&(t.sim.training.alt[t.sim.training.alt.currentDir],t.sim.training.alt.currentErrAcc<t.sim.training.alt.errs[t.sim.training.alt.errs.length-1]?t.sim.training.alt[t.sim.training.alt.currentDir]*=1.2:t.sim.training.alt[t.sim.training.alt.currentDir]*=-.5),t.sim.training.alt.errs.push(t.sim.training.alt.currentErrAcc),t.sim.training.alt.currentErrAcc=0,t.sim.training.alt.currentDir="p"===t.sim.training.alt.currentDir?"d":"d"===t.sim.training.alt.currentDir?"i":"p",t.sim.pids.alt[t.sim.training.alt.currentDir]+=t.sim.training.alt[t.sim.training.alt.currentDir],t.sim.pids.alt[t.sim.training.alt.currentDir]=Math.max(0,t.sim.pids.alt[t.sim.training.alt.currentDir]),t.sim.training.alt.accI=0,t.sim.training.alt.errs.length>5){var y=t.sim.training.alt.errs,x=y.length;Math.abs(y[x-5]-y[x-4])/y[x-4]<O&&Math.abs(y[x-4]-y[x-3])/y[x-3]<O&&Math.abs(y[x-3]-y[x-2])/y[x-2]<O&&Math.abs(y[x-2]-y[x-1])/y[x-1]<O&&(t.sim.stage=M,t.sim.training.maxspeed=!1)}}};if([D,S].includes(t.sim.stage)&&t.sim.training.maxspeed)for(var a=0,i=1;performance.now()-r+i<Math.min(e,1e3/60);)n(t),a+=1,i=(performance.now()-r)/a;else for(var o=0;o<e;o++)n(t)}t.sim.simTime=performance.now()-r;for(var s=0;s<t.rigidBodies.length;s++){var c=t.rigidBodies[s],l=c.userData.physicsBody.getMotionState();if(l){l.getWorldTransform(w);var u=w.getOrigin(),d=w.getRotation();c.position.set(u.x(),u.y(),u.z());var p=L(w);if(t.sim.camera.followPos){var g=p(-2,.5,0),v=Object(m.a)(g,3),y=v[0],x=v[1],C=v[2],I=p(1,0,0),P=Object(m.a)(I,3),B=P[0],V=P[1],R=P[2];t.camera.position.set(u.x()+y,u.y()+x,u.z()+C),t.camera.lookAt(u.x()+B,u.y()+V,u.z()+R)}else t.sim.camera.followLook&&t.camera.lookAt(u.x(),u.y(),u.z());c.quaternion.set(d.x(),d.y(),d.z(),d.w())}}}(e.current,t);var p=x(s);R(p),i.render(a,n)}})),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"row",background:"rgb(62, 62, 62)",overflow:"hidden"},children:[Object(v.jsxs)("div",{style:{position:"relative",overflow:"hidden"},children:[Object(v.jsxs)("div",{style:{position:"absolute",top:"10px",left:"10px",display:"flex",flexDirection:"column"},children:[Object(v.jsxs)("div",{children:[" ",V.ms.toFixed(2)+"ms"]}),Object(v.jsxs)("div",{children:[" ",V.simTime.toFixed(2)+"ms"]}),Object(v.jsxs)("div",{children:[" ",V.deltaToSim.toFixed(2)+"ms"]}),Object(v.jsx)(E,{name:"battery",arrf:function(){var t,r;return null===(t=e.current)||void 0===t||null===(r=t.sim)||void 0===r?void 0:r.batteryChart}}),Object(v.jsx)(E,{name:"y",arrf:function(){var t,r;return null===(t=e.current)||void 0===t||null===(r=t.sim)||void 0===r?void 0:r.yChart}}),Object(v.jsx)(E,{name:"errs",arrf:function(){var t,r;return null===(t=e.current)||void 0===t||null===(r=t.sim)||void 0===r?void 0:r.training.alt.errs}}),Object(v.jsx)("div",{children:function(){var t=V.pids.alt,e=V.training.alt;return Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{children:["p: ",t.p," + ",e.p]}),Object(v.jsxs)("div",{children:["i: ",t.i," + ",e.i]}),Object(v.jsxs)("div",{children:["d: ",t.d," + ",e.d]})]})}()}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{children:"p"}),Object(v.jsx)("input",{type:"range",min:"-1",max:"1",step:"0.01",value:V.pids.alt.pContrib})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{children:"i"}),Object(v.jsx)("input",{type:"range",min:"-1",max:"1",step:"0.01",value:V.pids.alt.iContrib})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{children:"d"}),Object(v.jsx)("input",{type:"range",min:"-1",max:"1",step:"0.01",value:V.pids.alt.dContrib})]})]}),Object(v.jsxs)("div",{style:{position:"absolute",bottom:"10px",left:"50%",transform:"translate(-50%,0%)"},children:[Object(v.jsxs)("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:"5px",padding:"5px",color:"white",cursor:"pointer"},onClick:function(){return e.current.sim.training.maxspeed=!e.current.sim.training.maxspeed},children:["MAX SPEED : ",V.training.maxspeed?"True":"False"]}),Object(v.jsx)("input",(t={type:"range",min:"0",max:"1",value:"0",step:"0.01"},Object(s.a)(t,"value",V.throttle),Object(s.a)(t,"onChange",(function(t){return e.current.sim.throttle=parseFloat(t.target.value)})),t))]}),Object(v.jsx)("div",{style:{position:"absolute",bottom:"10px",right:"10px",background:"rgba(0,0,0,0.2)",padding:"20px"},children:[M,C,S,D].map((function(t){var r=V.stage===t;return Object(v.jsx)("div",{onClick:function(){k(e.current,!0),e.current.sim.stage=t},style:{cursor:r?"auto":"pointer",border:r?"1px solid green":"none"},children:t})}))}),Object(v.jsx)("canvas",{ref:r,style:{flex:"1 1 auto"}})]}),Object(v.jsxs)("div",{style:{width:"300px",overflowY:"auto",height:"100%"},children:[Object(v.jsx)(z,{name:"motor center distance",unit:"mm",value:o.motorCenterDistance,setValue:function(t){return H((function(e){return Object(d.a)(Object(d.a)({},e),{},{motorCenterDistance:t})}))}}),Object(v.jsx)(z,{name:"motor kv",unit:"RPM/V",value:o.motorKV,setValue:function(t){return H((function(e){return Object(d.a)(Object(d.a)({},e),{},{motorKV:t})}))}}),Object(v.jsx)(z,{name:"single motor mass",unit:"g",value:o.motorMass,setValue:function(t){return H((function(e){return Object(d.a)(Object(d.a)({},e),{},{motorMass:t})}))}}),Object(v.jsx)(z,{name:"motor lift",unit:"N/W",value:o.motorLiftPerWatt,setValue:function(t){return H((function(e){return Object(d.a)(Object(d.a)({},e),{},{motorLiftPerWatt:t})}))}}),Object(v.jsx)(z,{name:"single esc mass",unit:"g",value:o.escMass,setValue:function(t){return H((function(e){return Object(d.a)(Object(d.a)({},e),{},{escMass:t})}))}}),Object(v.jsx)(z,{name:"battery mass",unit:"g",value:o.batteryMass,setValue:function(t){return H((function(e){return Object(d.a)(Object(d.a)({},e),{},{batteryMass:t})}))}}),Object(v.jsx)(z,{name:"battery capacity",unit:"mAh",value:o.batteryCapacity,setValue:function(t){return H((function(e){return Object(d.a)(Object(d.a)({},e),{},{batteryCapacity:t})}))}}),Object(v.jsx)(z,{name:"battery S",unit:"",value:o.batteryS,setValue:function(t){return H((function(e){return Object(d.a)(Object(d.a)({},e),{},{batteryS:t})}))}}),Object(v.jsx)(z,{name:"battery P",unit:"",value:o.batteryP,setValue:function(t){return H((function(e){return Object(d.a)(Object(d.a)({},e),{},{batteryP:t})}))}}),Object(v.jsx)(z,{name:"battery C",unit:"h-1",value:o.batteryC,setValue:function(t){return H((function(e){return Object(d.a)(Object(d.a)({},e),{},{batteryC:t})}))}}),Object(v.jsx)(z,{name:"frame mass",unit:"g",value:o.frameMass,setValue:function(t){return H((function(e){return Object(d.a)(Object(d.a)({},e),{},{frameMass:t})}))}}),Object(v.jsx)(W,{name:"total mass",unit:"g",value:o.totalMass}),Object(v.jsx)(W,{name:"total V",unit:"V",value:o.v}),Object(v.jsx)(W,{name:"max current",unit:"mA",value:o.mA}),Object(v.jsx)(W,{name:"max power",unit:"W",value:o.w})]})]})}function z(t){var e=t.name,r=t.unit,n=t.value,a=t.setValue;return Object(v.jsxs)("div",{style:{color:"white",display:"flex",flexDirection:"row",justifyContent:"space-between",padding:"10px"},children:[Object(v.jsx)("div",{style:{textAlign:"left"},children:e}),Object(v.jsxs)("div",{style:{color:"white",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",width:"120px",flex:"none"},children:[Object(v.jsx)("input",{style:{width:"60px"},value:n,type:"number",onChange:function(t){var e=parseFloat(t.target.value);a(e)}})," ",Object(v.jsx)("span",{style:{marginLeft:"5px"},children:r})]})]})}function W(t){var e=t.name,r=t.unit,n=t.value;return Object(v.jsxs)("div",{style:{color:"white",display:"flex",flexDirection:"row",justifyContent:"space-between",padding:"10px"},children:[Object(v.jsx)("div",{style:{textAlign:"left"},children:e}),Object(v.jsxs)("div",{style:{color:"white",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",width:"120px",flex:"none"},children:[Object(v.jsx)("input",{disabled:!0,style:{width:"60px"},value:n})," ",Object(v.jsx)("span",{style:{marginLeft:"5px"},children:r})]})]})}function E(t){var e=t.arrf,r=t.name,a=Object(n.useRef)(),i=Object(n.useRef)({min:9999,max:-9999,lastComputeIndex:-1}),o=Object(n.useState)(0),s=Object(m.a)(o,2),c=s[0],l=s[1],u=200,d=200;return g((function(t){var r=e();if(a.current&&r&&i.current){i.current.lastComputeIndex>r.length-1&&(i.current={min:9999,max:-9999,lastComputeIndex:-1});var n=i.current;a.current.width=u,a.current.height=d;var o=a.current.getContext("2d");o.width=u,o.height=d,o.fillStyle="rgba(0,0,0,0.2)",o.fillRect(0,0,u,d),r.length>0&&l(r[r.length-1]);for(var s=n.lastComputeIndex+1;s<r.length;s++)n.min=Math.min(n.min,r[s]),n.max=Math.max(n.max,r[s]);n.lastComputeIndex=r.length-1;var c=n.max-n.min,m=n.max+c/10,b=n.min-c/10,f=function(t){return d-d*(t-b)/(m-b)},h=function(t){return t*u/(r.length-1)};o.beginPath(),o.moveTo(h(0),f(r[0]||0)),r.forEach((function(t,e){o.lineTo(h(e),f(t))})),o.strokeStyle="#fff",o.stroke()}})),Object(v.jsxs)("div",{style:{border:"1px solid black",background:"rgba(0,0,0,0.6)",color:"white",width:u+"px"},children:[Object(v.jsxs)("div",{children:[r,": ",c.toFixed(2)]}),Object(v.jsx)("canvas",{ref:a,style:{width:u+"px",height:d+"px"}})]})}var F=function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(T,{})})},G=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,45)).then((function(e){var r=e.getCLS,n=e.getFID,a=e.getFCP,i=e.getLCP,o=e.getTTFB;r(t),n(t),a(t),i(t),o(t)}))};o.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(F,{})}),document.getElementById("root")),G()}},[[44,1,2]]]);
//# sourceMappingURL=main.1894f419.chunk.js.map